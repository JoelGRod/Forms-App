<h3>Template: <small>Dinamics</small></h3>
<hr>

<div class="row">
    <div class="col">

        <form (ngSubmit)="save()" #dinamicsform="ngForm" autocomplete="off">
            <!-- Form field -->
            <div class="mb-3 row">
                <label for="" class="col-sm-2 col-form-label">Name</label>
                <div class="col-sm-10">
                    <input type="text" 
                            class="form-control"
                            name="user_name"
                            [ngModel]="person.name"
                            placeholder="Insert name"
                            required>
                    <span class="form-text text-danger"
                            *ngIf="dinamicsform.controls.user_name?.errors && dinamicsform.controls.user_name?.touched">
                        Field required
                    </span>
                </div>
            </div>

            <!-- Form field -->
            <div class="mb-3 row">
                <label for="" class="col-sm-2 col-form-label">Add</label>
                <div class="col-sm-10">
                    <div class="input-group">
                        <input type="text" 
                                class="form-control"
                                [(ngModel)]="new_favourite"
                                name="new_favourite"
                                (keyup.enter)="add()"
                                placeholder="Add favourite">
                        <button type="button" 
                                class="btn btn-outline-primary"
                                (click)="add()">Add</button>
                    </div>
                </div>
            </div>

            <!-- Form field -->
            <div class="mb-3 row">
                <label for="" class="col-sm-2 col-form-label">Favourites</label>
                <div class="col-sm-10">
                    <div class="input-group mb-1" *ngFor="let item of person.favourites; let i = index">
                        <input [(ngModel)]="item.name"
                                [name]="'favourite_'+i"
                                class="form-control">
                        <button type="button" class="btn btn-outline-danger" (click)="delete(i)">Delete</button>
                    </div>
                </div>
            </div>

            <!-- Form button -->
            <div class="row">
                <div class="col">
                    <button type="button" 
                            class="btn btn-primary float-end px-4"
                            [disabled]="dinamicsform.invalid"
                            (click)="save()">
                            Save
                    </button>
                </div>
            </div>

        </form>

    </div>
</div>

<span>Person</span>
<pre>{{ person | json }}</pre>
<span>Form Values</span>
<pre>{{ dinamicsform.value | json }}</pre>